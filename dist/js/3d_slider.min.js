"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){function e(){t.slider_test.setAutoPlay(800),setTimeout(function(){t.slider_test.setDistance(1.5)},2400),setTimeout(function(){t.slider_test.setAxis("X"),t.slider_test.setPerspectiveOrigin("80% 50%")},4800),setTimeout(function(){t.slider_test.setDistance(1.09),t.slider_test.setPerspectiveOrigin("50% 50%"),t.slider_test.setAxisToRotateZ(30)},7200),setTimeout(function(){t.slider_test.setAxis("Y"),t.slider_test.setAxisToRotateZ(0)},9600),setTimeout(function(){t.slider_test.setDistance(1.2),t.slider_test.setPerspectiveOrigin("20% 80%")},12e3),setTimeout(function(){t.slider_test.setPerspectiveOrigin("50% 50%")},14400),setTimeout(function(){t.slider_test.stopAutoPlay()},16800)}var i=document.querySelector(".demo button.play");i.onclick=function(){return e()}}(void 0);var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();!function(t){var e='<svg class="slider3d_svg_prev" viewBox="0 0 100 100"><polyline points="30,50 70,0 70,100"/></svg>',i='<svg class="slider3d_svg_next" viewBox="0 0 100 100"><polyline points="70,50 30,0 30,100"/></svg>',s='<svg class="slider3d_svg_prev" viewBox="0 0 100 100"><polyline points="50,30 0,70 100,70"/></svg>',r='<svg class="slider3d_svg_next" viewBox="0 0 100 100"><polyline points="50,70 100,30 0,30"/></svg>';t.slider3d=function(){function t(e,i,s,r){return _classCallCheck(this,t),this.element=document.querySelector(e),1!==this.element.nodeType?console.log("this element is not ELEMENT_NODE"):(this.initAxis(i),this.initAxisToRotateZ(s),this.initDistance(r),void this.initSlider(this))}return _createClass(t,[{key:"initSlider",value:function(t){var e=t.element,i=Array.from(e.children),s=i.length;if(0===s)return console.log("content does not exist");this.element_child_width=parseInt(getComputedStyle(i[0]).width),this.element_child_height=parseInt(getComputedStyle(i[0]).height),"Y"===this.axis?this.perspective_basic=this.element_child_width:this.perspective_basic=this.element_child_height,this.perspective_div=Math.ceil(s/4);for(var r=0;r<s;r++){var n=document.createElement("div");n.setAttribute("class","slider3d_item"),n.appendChild(i[r]),e.appendChild(n)}e.innerHTML='<div class="slider3d_perspective" style="perspective: '+this.perspective_basic*this.perspective_div+'px;">\t\t\t\t\t\t\t\t\t\t\t\t<div class="slider3d_container" style="transform: rotateZ('+this.rotate_z+"deg) translateZ(-"+this.perspective_basic*this.perspective_div+'px);">'+e.innerHTML+"</div>\t\t\t\t\t\t\t\t\t\t\t</div>",this.perspective_object=e.firstElementChild;var l='<button type="button" class="slider3d_btn_prev" aria-label="previous content"></button>\t\t\t\t\t\t\t\t<button type="button" class="slider3d_btn_next" aria-label="next content"></button>';e.firstElementChild.innerHTML+=l,this.btn_prev=e.querySelector(".slider3d_btn_prev"),this.btn_next=e.querySelector(".slider3d_btn_next"),this.initButton(),this.container_object=this.perspective_object.firstElementChild,this.slider_items=Array.from(e.querySelectorAll(".slider3d_item")),this.slider_items_length=this.slider_items.length,this.deg=360/s,this.translate_z=this.perspective_basic*this.perspective_div*this.dist/2;for(var r=0;r<this.slider_items_length;r++)this.slider_items[r].style.transform="rotate"+this.axis+"("+r*this.deg+"deg) rotateZ("+this.reverse_rotate_z+"deg) translateZ("+this.translate_z+"px) scale("+this.reverse_dist+")";this.select_slide_item=0,this.sort(this.select_slide_item),this.btn_prev.onclick=this.rotate.bind(this.btn_prev,t,1*t.deg),this.btn_next.onclick=this.rotate.bind(this.btn_next,t,t.deg*-1)}},{key:"rotate",value:function(t,e){for(var i,s,r=0;r<t.slider_items_length;r++)s=t.slider_items[r].style.transform.split(" "),i=s[0].substring(8,s[0].length-4),i=1*i+e,s[0]="rotate"+t.axis+"("+i+"deg)",t.slider_items[r].style.transform=s.join(" ");e<0?t.select_slide_item=(t.select_slide_item+1)%t.slider_items_length:e>0&&(t.select_slide_item=(t.select_slide_item-1+t.slider_items_length)%t.slider_items_length),t.sort(t.select_slide_item)}},{key:"sort",value:function(t){for(var e=0;e<this.slider_items_length;e++)this.slider_items[e].style.zIndex=-10;for(var e=t-1;e<=t+1;e++){var i=(e+this.slider_items_length)%this.slider_items_length;e===t?this.slider_items[i].style.zIndex=0:this.slider_items[i].style.zIndex=-5}}},{key:"initAxis",value:function(t){var e=t||"Y";return"Y"!==e&&"X"!==e?console.log('axis is only "X" | "Y"'):void(this.axis=e)}},{key:"setAxis",value:function(t){this.initAxis(t);for(var e,i,s=0;s<this.slider_items_length;s++)i=this.slider_items[s].style.transform.split(" "),e=i[0].substring(8,i[0].length-4),i[0]="rotate"+this.axis+"("+e+"deg)",this.slider_items[s].style.transform=i.join(" ");this.initButton()}},{key:"initAxisToRotateZ",value:function(t){var e=t||0;return"number"!==Object.prototype.toString.call(e).slice(8,-1).toLowerCase()?console.log("deg is not number"):(this.rotate_z=e,void(0!==this.rotate_z?this.reverse_rotate_z=this.rotate_z*-1:this.reverse_rotate_z=this.rotate_z))}},{key:"setAxisToRotateZ",value:function(t){this.initAxisToRotateZ(t);var e=this.container_object.style.transform.split(" ");e[0]="rotateZ("+this.rotate_z+"deg)",this.container_object.style.transform=e.join(" ");for(var i,s=0;s<this.slider_items_length;s++)i=this.slider_items[s].style.transform.split(" "),i[1]="rotateZ("+this.reverse_rotate_z+"deg)",this.slider_items[s].style.transform=i.join(" ")}},{key:"initDistance",value:function(t){var e=t||1.2;return e<0||e>2?console.log('dist is only "0.0 <= dist <= 2.0"'):(this.dist=e,void(this.reverse_dist=2-this.dist))}},{key:"setDistance",value:function(t){this.initDistance(t),this.translate_z=this.perspective_basic*this.perspective_div*this.dist/2;for(var e,i=0;i<this.slider_items_length;i++)e=this.slider_items[i].style.transform.split(" "),e[2]="translateZ("+this.translate_z+"px)",e[3]="scale("+this.reverse_dist+")",this.slider_items[i].style.transform=e.join(" ")}},{key:"initButton",value:function(){"Y"===this.axis?(this.btn_prev.innerHTML=e,this.btn_next.innerHTML=i):(this.btn_prev.innerHTML=s,this.btn_next.innerHTML=r),"Y"===this.axis?this.perspective_object.style.flexDirection="row":this.perspective_object.style.flexDirection="column"}},{key:"setPerspectiveOrigin",value:function(t){this.perspective_object.style.perspectiveOrigin=t}},{key:"setAutoPlay",value:function(t){var e=this;this.interval=setInterval(function(){e.rotate(e,e.deg*-1)},t)}},{key:"stopAutoPlay",value:function(){clearInterval(this.interval)}},{key:"swipe",value:function(){}}]),t}()}(void 0);